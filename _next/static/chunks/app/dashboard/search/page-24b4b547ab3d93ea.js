(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{23571:function(e,t,n){Promise.resolve().then(n.bind(n,47035))},47035:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r=n(57437),i=n(2265),s=n(17156),o=n(82588),a=n(27316),l=n(28027),c=n(83719),u=n(32184),d=n(78498),p=n(60335),h=n(43726),x=n(50124),m=n(39516),g=n(52326),f=n(60091),j=n(58433),b=n(77183),_=n(98725),C=n(31074),v=n(87430),Z=n(6586),y=n(5879),S=n(11444),k=n(81136),w=n(94696),E=n(24037),I=e=>{let{title:t,description:n,imageUrl:i,onClick:s}=e;return(0,r.jsx)(l.Z,{elevation:3,sx:{display:"flex",alignItems:"center",borderRadius:2,minHeight:150,overflow:"hidden"},onClick:s,children:(0,r.jsxs)(j.ZP,{container:!0,children:[(0,r.jsx)(j.ZP,{item:!0,xs:7,sx:{padding:2},children:(0,r.jsxs)(w.Z,{children:[(0,r.jsx)(c.Z,{variant:"h6",sx:{fontWeight:"bold"},children:t}),n&&(0,r.jsx)(c.Z,{variant:"body2",children:n})]})}),(0,r.jsx)(j.ZP,{item:!0,xs:5,children:(0,r.jsx)(E.Z,{component:"img",image:i,alt:t,sx:{height:"100%",objectFit:"cover"}})})]})})},P=n(40673),O=n(16463),A=n(64466),N=n(65284),F=n(24635),R=n(20768);let L=(e,t)=>{let n;return function(){for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}};var T=()=>{let[e,t]=(0,i.useState)(""),[n,w]=(0,i.useState)(e),[E,T]=(0,i.useState)([]),[G,B]=(0,i.useState)(!1),[W,U]=(0,i.useState)(!1),Y=(0,O.useRouter)(),D=(0,i.useRef)(null),J=(0,S.I0)(),{productsAndGroupData:M,selectedItem:z}=(0,_.r)(),[V,H]=(0,i.useState)([]),{filterGroup:K}=(0,P.X)(),Q=(0,i.useCallback)(L(e=>w(e),300),[]),X=(0,i.useCallback)((e,n)=>{null!==n&&(t(n),Q(n))},[Q]);(0,i.useEffect)(()=>{let e=localStorage.getItem("recentSearches");e&&T(JSON.parse(e))},[]);let q=(0,i.useCallback)(e=>{let t=[e,...E.filter(t=>t!==e)];T(t),localStorage.setItem("recentSearches",JSON.stringify(t))},[E]),$=(0,i.useCallback)(e=>{let t=E.filter(t=>t!==e);T(t),localStorage.setItem("recentSearches",JSON.stringify(t))},[E]);(0,i.useEffect)(()=>{(async()=>{if(!n.trim()){H([]);return}U(!0),await (0,R.gw)(200);let e=n.toLowerCase();H(Object.values((null==M?void 0:M.items)||{}).filter(t=>t.web_description.toLowerCase().includes(e)||t.screen_description.toLowerCase().includes(e))),U(!1)})()},[n,M]);let ee=(0,i.useCallback)(n=>{let r=n||e;r&&(t(r),w(r),q(r),en(!1))},[e,q]),[et,en]=(0,i.useState)(!1),er=(0,i.useCallback)(()=>en(!0),[]),ei=(0,i.useCallback)(()=>{en(!1)},[]),es=(0,i.useCallback)(()=>{B(!1),J((0,k.Os)([]))},[J]),eo=(0,i.useCallback)(e=>{B(!0),J((0,k.fF)([e]))},[J]),ea=(null==M?void 0:M.groups)?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[];return t>3||e&&e.forEach(e=>{if(e.sub_group&&e.sub_group.length>0){let t=e.sub_group.map(t=>{var n;return{...t,group_screen_name:t.group_screen_name&&(null===(n=t.group_screen_name.split("-").pop())||void 0===n?void 0:n.trim())||"",group_father:e}});n.push(...t)}}),n}(null==M?void 0:M.groups):"";return(0,r.jsxs)(s.Z,{sx:{padding:2},children:[(0,r.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",position:"relative",width:"100%",maxWidth:et?"100vw":"100%",margin:"0 auto"},children:[(0,r.jsx)(o.Z,{freeSolo:!0,open:et,onOpen:er,onClose:ei,options:E,inputValue:e,disableClearable:!0,onInputChange:X,onKeyDown:t=>{"Enter"===t.key&&e&&(ee(),ei())},onChange:(e,t)=>{t&&(ee(t),ei())},sx:{width:"100%"},PopperComponent:e=>(0,r.jsx)(a.Z,{...e,open:et,anchorEl:D.current,placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,8]}}],onMouseDown:e=>e.preventDefault(),sx:{zIndex:"2 !important",width:"100vw !important",left:0,marginTop:"5px !important"},children:(0,r.jsxs)(l.Z,{elevation:3,sx:{height:"calc(100vh - 80px)",backgroundColor:"#fff",overflowY:"auto",borderRadius:0,padding:2,width:"100%",boxShadow:"none"},children:[E.length>0&&(0,r.jsx)(c.Z,{variant:"subtitle1",sx:{paddingLeft:2,marginBottom:1},fontWeight:"bold",children:"Buscas recentes"}),(0,r.jsx)(u.Z,{children:E.map((e,t)=>(0,r.jsxs)(d.ZP,{secondaryAction:(0,r.jsx)(p.Z,{edge:"end","aria-label":"delete",onClick:()=>$(e),children:(0,r.jsx)(C.Z,{})}),children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)(v.Z,{})}),(0,r.jsx)(x.Z,{primary:e,onClick:()=>ee(e)})]},t))})]})}),renderInput:t=>(0,r.jsx)(m.Z,{...t,inputRef:D,id:"outlined-adornment-amount",variant:"outlined",fullWidth:!0,type:"search",InputProps:{...t.InputProps,startAdornment:(0,r.jsx)(g.Z,{position:"start",children:(0,r.jsx)(b.Z,{})}),endAdornment:(0,r.jsx)(g.Z,{position:"end",children:(0,r.jsx)(p.Z,{children:(0,r.jsx)(N.Z,{})})})},onBlur:ei,onFocus:er,placeholder:"Buscar em todos os produtos",sx:{width:et||""!==e?"calc(100% - 100px)":"100%",transition:"width 0.1s ease",height:"56px","& input[type='search']::-webkit-search-cancel-button":{display:"none"},"& input[type='search']":{WebkitAppearance:"none",MozAppearance:"none",appearance:"none"}}})}),et||""!==e?(0,r.jsx)(f.Z,{onClick:()=>{ei(),t(""),w("")},variant:"text",sx:{position:"absolute",right:0,top:8,height:"40px"},children:"Cancelar"}):null]}),(0,r.jsx)(s.Z,{children:(0,r.jsx)(s.Z,{sx:{flexGrow:1,paddingY:4,width:"100%"},children:(0,r.jsx)(j.ZP,{container:!0,spacing:2,children:W?(0,r.jsx)(r.Fragment,{children:[...Array(6)].map((e,t)=>(0,r.jsx)(j.ZP,{item:!0,xs:6,sm:6,children:(0,r.jsx)(Z.C,{})},t))}):V&&V.length>0?V.map((e,t)=>{var n;return(0,r.jsx)(j.ZP,{item:!0,xs:6,sm:6,children:(0,r.jsx)(F.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:(0,r.jsx)(Z.S,{image:e.images&&(null===(n=e.images[0])||void 0===n?void 0:n.url)?"".concat("https://cibus-dev.conecto.com.br/storage").concat(e.images[0].url):"",title:e.screen_description,price:e.best_price?e.best_price:e.price,description:e.web_description,onClick:async()=>eo(e)})})},t)}):ea&&ea.length>0?ea.map((e,t)=>(0,r.jsx)(j.ZP,{item:!0,xs:12,sm:12,md:12,lg:6,children:(0,r.jsx)(F.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:(0,r.jsx)(I,{title:e.group_screen_name,imageUrl:e.image?"".concat("https://cibus-dev.conecto.com.br/storage").concat(e.image):"",onClick:()=>{K(e.group_screen_key,e.group_father,!0),J((0,A.t0)(e.group_father.group_screen_name)),J((0,k.SI)(e.group_father)),Y.push("/dashboard/items")}})})},e.group_screen_key)):null})})}),(0,r.jsx)(y.n,{open:G,handleClose:es,selectedItem:z})]})},G=()=>(0,r.jsx)(T,{})},64466:function(e,t,n){"use strict";n.d(t,{Lj:function(){return o},OB:function(){return s},cV:function(){return i},t0:function(){return a}});var r=n(70079);let i=e=>({type:r.YS,payload:{token:e}}),s=e=>({type:r.P6,payload:{configData:e}}),o=()=>({type:r.cd,payload:{}}),a=e=>({type:r.j6,payload:{pageName:e}})},70079:function(e,t,n){"use strict";n.d(t,{FZ:function(){return o},P6:function(){return i},YS:function(){return r},cd:function(){return s},j6:function(){return a}});let r="CONFIG_REQUEST",i="CONFIG_SUCCESS",s="CONFIG_FAILURE",o="CLEAR_CONFIG_STATE",a="SET_PAGENAME"}},function(e){e.O(0,[444,570,336,593,448,91,35,445,916,782,433,234,482,478,971,23,744],function(){return e(e.s=23571)}),_N_E=e.O()}]);