"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{77489:function(e,t,n){n.d(t,{u:function(){return m}});var r=n(57437),u=n(98959),i=n(95253),s=n(28125),o=n(7590),l=n(79617),c=n(51847),a=n(83719),d=n(33578),p=n(32184),f=n(78498),_=n(35349),h=n(17156),v=n(26460),x=n(60335),g=n(20768);n(2265);var m=e=>{let{data:t}=e,{transferItem:n,handleDecrement:m,complement:y}=(0,u.C)(),S=e=>{let t=y.find(t=>t.plu_id===e);return t?t.quantity:0};return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(c.Z,{expandIcon:(0,r.jsx)(s.Z,{}),"aria-controls":"complementos-content",id:"complementos-header",children:(0,r.jsx)(a.Z,{children:"Adicionar Complementos"})}),(0,r.jsx)(d.Z,{children:(0,r.jsx)(p.Z,{children:t.map((e,t)=>(0,r.jsxs)(f.ZP,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(_.Z,{src:e.image,variant:"square",sx:{width:50,height:50,marginRight:2}}),(0,r.jsxs)(h.Z,{sx:{flexGrow:1},children:[(0,r.jsx)(a.Z,{variant:"subtitle1",children:e.screen_description}),(0,r.jsxs)(a.Z,{variant:"caption",color:"text.secondary",children:["R$",e.best_price?(0,g.T4)(e.best_price):(0,g.T4)(e.price)]})]}),(0,r.jsx)(h.Z,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsxs)(v.Z,{variant:"contained",children:[(0,r.jsx)(x.Z,{size:"small",onClick:()=>m(e.plu_id),children:(0,r.jsx)(o.Z,{})}),(0,r.jsx)(a.Z,{sx:{textAlign:"center",minWidth:"20px"},children:S(e.plu_id)}),(0,r.jsx)(x.Z,{size:"small",onClick:()=>n(e),children:(0,r.jsx)(i.Z,{})})]})})]},t))})})]})}},79475:function(e,t,n){n.d(t,{I:function(){return f}});var r=n(57437),u=n(28125),i=n(79617),s=n(51847),o=n(83719),l=n(33578),c=n(32184),a=n(78498),d=n(68038),p=n(11929),f=e=>{let{data:t,selectedRemoves:n,onToggle:f}=e;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(s.Z,{expandIcon:(0,r.jsx)(u.Z,{}),"aria-controls":"complementos-content",id:"complementos-header",children:(0,r.jsx)(o.Z,{children:"Retirar Ingredientes"})}),(0,r.jsx)(l.Z,{children:(0,r.jsx)(c.Z,{sx:{mb:2},children:t.map((e,t)=>(0,r.jsx)(a.ZP,{children:(0,r.jsx)(d.Z,{control:(0,r.jsx)(p.Z,{checked:n.includes(e.screen_description),onChange:()=>f(e.screen_description)}),label:"".concat(e.screen_description)})},t))})})]})}},98959:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(40673),u=n(98725),i=n(81136),s=n(16463),o=n(2265),l=n(11444);let c=()=>{var e;let t=(0,s.useRouter)(),n=(0,l.I0)(),{subGroups:c,activeFilter:a,setActiveFilter:d,filterGroup:p}=(0,r.X)(),{productsAndGroupData:f,selectedGroup:_,selectedItem:h}=(0,u.r)(),v=null!==(e=null==f?void 0:f.items)&&void 0!==e?e:{},[x,g]=(0,o.useState)([]),[m,y]=(0,o.useState)([]),[S,j]=(0,o.useState)(!1),[E,b]=(0,o.useState)([]),[Z,T]=(0,o.useState)([]),[C,O]=(0,o.useState)({}),[I,A]=(0,o.useState)(),[k,R]=(0,o.useState)([]),[G,P]=(0,o.useState)(""),U=()=>Math.floor(1e4*Math.random()),q=e=>{T(t=>t.map(t=>{var n,r;return t&&t.plu_id===e?{...t,quantity:(null!==(n=t.quantity)&&void 0!==n?n:0)+1,amount:(null!==(r=t.amount)&&void 0!==r?r:0)+(t.best_price?t.best_price:t.price||0)}:t}))};return(0,o.useEffect)(()=>{n((0,i.w7)(Z))},[Z]),(0,o.useEffect)(()=>{let e=k.map(e=>"- ".concat(e," ")).join("");n((0,i.mx)(e))},[k]),(0,o.useEffect)(()=>{a&&g(Object.values(v).filter(e=>e.group_screen_key===a)),602===a&&0===m.length&&(j(!0),n((0,i.fF)([])))},[a,v]),(0,o.useEffect)(()=>{if(h&&h.length>1){let e=h.map(e=>void 0===e.uniqid?{...e,uniqid:U()}:e);JSON.stringify(h)!==JSON.stringify(e)&&n((0,i.fF)(e))}else null==h||h.forEach(e=>{if(void 0===e.uniqid){let t={...e,uniqid:U()};n((0,i.fF)([t]))}})},[h,n]),{open:S,setOpen:j,activeFilter:a,setActiveFilter:d,productionsGroups:x,selectedItems:m,handleClose:()=>{j(!1),n((0,i.Os)([]))},addCart:e=>{602===a?m.includes(e)?y(t=>t.filter(t=>t!==e)):m.length<2&&y(t=>[...t,e]):m.includes(e)?y(t=>t.filter(t=>t!==e)):(n((0,i.fF)([e])),j(!0))},items:v,dispatch:n,setSelectedItems:y,router:t,setProductionsGroups:g,subGroups:c,selectedItem:h,filterGroup:p,quantidades:C,setQuantidades:O,handleIncrement:q,handleDecrement:e=>{T(t=>t.map(t=>{var n,r,u,i;return t&&t.plu_id===e&&(null!==(n=t.quantity)&&void 0!==n?n:0)>0?{...t,quantity:(null!==(r=t.quantity)&&void 0!==r?r:0)-1,amount:(null!==(u=t.amount)&&void 0!==u?u:0)-(null!==(i=t.price)&&void 0!==i?i:0)}:t}).filter(e=>{var t;return e&&(null!==(t=e.quantity)&&void 0!==t?t:0)>0}))},transferItem:e=>{if(b(E.filter(t=>t.plu_id!==e.plu_id)),Z.find(t=>t.plu_id===e.plu_id))q(e.plu_id);else{let t={...e,uniqid:U(),desc_plu:e.short_description,quantity:1,amount:e.best_price?e.best_price:e.price,type:1};T(e=>[...e,t])}},complements:E,complement:Z,selectedRemoves:k,observation:G,handleToggle:e=>{let t=k.indexOf(e),n=[...k];-1===t?n.push(e):n.splice(t,1),R(n)},generateUniqueId:U,selectedGroup:_,loading:I,setLoading:A}}},40673:function(e,t,n){n.d(t,{X:function(){return c},p:function(){return a}});var r=n(57437),u=n(2265),i=n(11444),s=n(98725),o=n(81136);let l=(0,u.createContext)({groups:{},subGroups:[],activeFilter:0,setActiveFilter:()=>{},filterGroup:()=>{}}),c=()=>(0,u.useContext)(l),a=e=>{var t,n;let{children:c}=e,{productsAndGroupData:a,selectedGroup:d}=(0,s.r)(),p=(0,i.I0)(),[f,_]=(0,u.useState)(null!==(t=null==d?void 0:d.sub_group)&&void 0!==t?t:[]),h=null!==(n=null==a?void 0:a.groups)&&void 0!==n?n:{},[v,x]=(0,u.useState)(()=>{let e=null==d?void 0:d.group_screen_key;if(f){var t;let n=f.length>0?f[0].group_screen_key:void 0;return null!==(t=null!=n?n:e)&&void 0!==t?t:0}return null!=e?e:0}),g=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],_(e),x(e[0].group_screen_key)};return(0,r.jsx)(l.Provider,{value:{groups:h,subGroups:f,activeFilter:v,setActiveFilter:x,filterGroup:(e,t,n)=>{let r=!1;x(e),p((0,o.Gm)(e));let u=!1,i=Object.values(h).filter(t=>{if(e===t.group_screen_key)return t;if(0===t.has_plu&&Object.keys(t.sub_group).length>0){let n=Object.values(t.sub_group).filter(t=>e===t.group_screen_key&&3===t.group_type&&0===t.has_plu);n.length>0&&(r=n[0])}});return i.length>0&&0===i[0].has_plu?g(i[0].sub_group,1):r?(p((0,o.yJ)(!0)),g(r.sub_group,1)):void(t&&t.sub_group&&Object.values(t.sub_group).some(e=>!!e.sub_group)&&(u=!0),u?t&&n&&(_(null==t?void 0:t.sub_group),x(e)):_([]))}},children:c})}},98725:function(e,t,n){n.d(t,{r:function(){return i}});var r=n(2265),u=n(11444);let i=()=>{let{productsAndGroupData:e}=(0,u.v9)(e=>e.productsAndGroups),t=(0,u.v9)(e=>e.productsAndGroups.selectedGroup),n=(0,u.v9)(e=>e.productsAndGroups.selectedItem),i=(0,u.v9)(e=>e.productsAndGroups.currentLevel),s=(0,u.v9)(e=>e.productsAndGroups.groupId),o=(0,u.v9)(e=>e.cart.items),[l,c]=(0,r.useState)({message:"",open:!1,severity:"success",title:""}),a=(0,r.useRef)(o.length);return(0,r.useEffect)(()=>{let e=a.current,t=o.length;t>e&&c({message:"Produto adicionado com sucesso",open:!0,severity:"success",title:"Produto Adicionado"}),a.current=t},[o]),{productsAndGroupData:e,selectedGroup:t,selectedItem:n,currentLevel:i,groupId:s,closeAlert:()=>{c({message:"",open:!1,severity:"success",title:""})},alertInfo:l}}},81136:function(e,t,n){n.d(t,{An:function(){return i},Co:function(){return s},Gm:function(){return a},Os:function(){return p},SI:function(){return o},c_:function(){return u},fF:function(){return l},mx:function(){return f},w7:function(){return d},yJ:function(){return c}});var r=n(75552);let u=(e,t,n)=>({type:r.f9,payload:{table_key:e,store_key:t,access_token:n}}),i=e=>({type:r.hk,payload:{productsAndGroupData:e}}),s=()=>({type:r.js,payload:{}}),o=e=>({type:r.t$,payload:e}),l=e=>({type:r.qE,payload:e}),c=e=>({type:r.SN,payload:e}),a=e=>({type:r.Zk,payload:e}),d=e=>({type:r.$W,payload:{complement:e}}),p=e=>({type:r.lk,payload:e}),f=e=>({type:r.sU,payload:{observation:e}})},75552:function(e,t,n){n.d(t,{$W:function(){return c},LV:function(){return s},SN:function(){return d},Zk:function(){return p},f9:function(){return r},hk:function(){return u},js:function(){return i},lk:function(){return a},qE:function(){return l},sU:function(){return f},t$:function(){return o}});let r="LIST_PRODUCTS_AND_GROUPS_REQUEST",u="LIST_PRODUCTS_AND_GROUPS_SUCCESS",i="LIST_PRODUCTS_AND_GROUPS_FAILURE",s="CLEAR_PRODUCTS_AND_PRODUCTS_STATE",o="SET_SELECTED_GROUP",l="SET_SELECTED_ITEMS",c="SET_COMPLEMENT_ITEM",a="SET_DYNAMICS",d="GOBACK_SUBGROUP",p="GROUP_ID",f="SET_OBSERVATION_ITEM"},20768:function(e,t,n){function r(e){return e.toFixed(2).replace(".",",")}n.d(t,{T4:function(){return r},gw:function(){return s},o$:function(){return i},un:function(){return u}});let u=e=>{if(!e)return"";let t=e.replace(/\D/g,"").match(/^(\d{2})(\d{5})(\d{4})$/);return t?"(".concat(t[1],") ").concat(t[2],"-").concat(t[3]):e},i=["/dashboard","/dashboard/profile","/dashboard/orders","/dashboard/search"],s=e=>new Promise(t=>setTimeout(t,e))}}]);